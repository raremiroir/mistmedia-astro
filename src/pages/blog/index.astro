---
import { t, changeLanguage } from "i18next";
import { getCollection } from "astro:content";

// Astro components
import BaseLayout 	from "@layouts/BaseLayout.astro";
import Page 			from "@/components/Core/Page/Page.astro";
import Section 		from "@/components/Core/Section/Section.astro";
import FormattedDate from "@/components/Utils/FormattedDate.astro";
import Hero 			from "@/components/Common/Hero/Hero.astro";
// Svelte components
import Card 			from "@/components/Common/Card/Card.svelte";

changeLanguage("nl");

const posts = (await getCollection("blog"))
	.sort((a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf());
---

<BaseLayout title={t("site:pages.blog.title")}>
	<Page>
		<Hero slot="hero" alt bgImg="/images/stock/webdev-2.webp" title="Mist Blog">
			<span slot="subtitle">
				Navigate through our Blog and find a post that suits your interests!
			</span>
		</Hero>

		<Section name="blog" title={"Mist Blog"}>
			<ul class="grid grid-cols-3 gap-8">
				{posts.map((post) => (
					<Card 
						color="surface_alt" variant="fill"
						hover active article block
						title={post.data.title}
						href={`/blog/${post.slug}/`}
					>
						<FormattedDate 
							date={post.data.updatedDate?? post.data.pubDate} 
							type={post.data.updatedDate ? "updated" : "published"} 
						/>
					</Card>
				))}
			</ul>
		</Section>

	</Page>
</BaseLayout>
